{
  "version": 3,
  "sources": ["isikukood.js"],
  "sourcesContent": ["\"use strict\";\nvar Isikukood = (() => {\n  var __defProp = Object.defineProperty;\n  var __getOwnPropDesc = Object.getOwnPropertyDescriptor;\n  var __getOwnPropNames = Object.getOwnPropertyNames;\n  var __hasOwnProp = Object.prototype.hasOwnProperty;\n  var __export = (target, all) => {\n    for (var name in all)\n      __defProp(target, name, { get: all[name], enumerable: true });\n  };\n  var __copyProps = (to, from, except, desc) => {\n    if (from && typeof from === \"object\" || typeof from === \"function\") {\n      for (let key of __getOwnPropNames(from))\n        if (!__hasOwnProp.call(to, key) && key !== except)\n          __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });\n    }\n    return to;\n  };\n  var __toCommonJS = (mod) => __copyProps(__defProp({}, \"__esModule\", { value: true }), mod);\n  var isikukood_exports = {};\n  __export(isikukood_exports, {\n    Gender: () => Gender,\n    default: () => Isikukood\n  });\n  class Isikukood {\n    constructor(c) {\n      this._code = String(c);\n    }\n    get code() {\n      return this._code;\n    }\n    set code(c) {\n      this._code = String(c);\n    }\n    /**\n     * Algorithm to get control number.\n     */\n    getControlNumber(code = \"\") {\n      if (!code) {\n        code = this.code;\n      }\n      const mul1 = [1, 2, 3, 4, 5, 6, 7, 8, 9, 1];\n      const mul2 = [3, 4, 5, 6, 7, 8, 9, 1, 2, 3];\n      let controlNum = 0;\n      let total = 0;\n      for (let i = 0; i < 10; ++i) {\n        total += Number(code.charAt(i)) * mul1[i];\n      }\n      controlNum = total % 11;\n      total = 0;\n      if (controlNum === 10) {\n        for (let i = 0; i < 10; ++i) {\n          total += Number(code.charAt(i)) * mul2[i];\n        }\n        controlNum = total % 11;\n        if (10 === controlNum) {\n          controlNum = 0;\n        }\n      }\n      return controlNum;\n    }\n    /**\n     * Validates the Estonian personal ID.\n     */\n    validate() {\n      if (this.code.charAt(0) === \"0\" || this.code.length !== 11) {\n        return false;\n      }\n      if (this.getControlNumber() !== Number(this.code.charAt(10))) {\n        return false;\n      }\n      const year = Number(this.code.substring(1, 3));\n      const month = Number(this.code.substring(3, 5));\n      const day = Number(this.code.substring(5, 7));\n      const birthDate = this.getBirthday();\n      return year === birthDate.getFullYear() % 100 && birthDate.getMonth() + 1 === month && day === birthDate.getDate();\n    }\n    /**\n     * Gets the gender of a person\n     */\n    getGender() {\n      const genderNum = this.code.charAt(0);\n      const maleDigits = [\"1\", \"3\", \"5\"];\n      const femaleDigits = [\"2\", \"4\", \"6\"];\n      if (maleDigits.includes(genderNum)) {\n        return \"male\" /* MALE */;\n      } else if (femaleDigits.includes(genderNum)) {\n        return \"female\" /* FEMALE */;\n      } else {\n        return \"unknown\" /* UNKNOWN */;\n      }\n    }\n    /**\n     * Get the age of a person in years.\n     */\n    getAge() {\n      const birthDate = this.getBirthday();\n      const today = /* @__PURE__ */ new Date();\n      let age = today.getFullYear() - birthDate.getFullYear();\n      const monthDiff = today.getMonth() - birthDate.getMonth();\n      if (monthDiff < 0 || monthDiff === 0 && today.getDate() < birthDate.getDate()) {\n        age--;\n      }\n      return age;\n    }\n    /**\n     *  Get the birthday of a person.\n     */\n    getBirthday() {\n      let year = Number(this.code.substring(1, 3));\n      const month = Number(this.code.substring(3, 5).replace(/^0/, \"\")) - 1;\n      const day = Number(this.code.substring(5, 7).replace(/^0/, \"\"));\n      const firstNumber = this.code.charAt(0);\n      for (let i = 1, j = 1800; i <= 8; i += 2, j += 100) {\n        if ([i, i + 1].map(String).includes(firstNumber)) {\n          year += j;\n        }\n      }\n      return new Date(year, month, day);\n    }\n    /**\n     * Parses the code and return it's data as object.\n     */\n    parse() {\n      return Isikukood.parse(this.code);\n    }\n    static parse(code) {\n      const ik = new this(code);\n      const data = {\n        gender: ik.getGender(),\n        birthDay: ik.getBirthday(),\n        age: ik.getAge()\n      };\n      return data;\n    }\n    /**\n     *  Validates the Estonian personal ID.\n     *  In params argument months are beginning from 1, not from 0.\n     *  If code cannot be generated empty string is returned.\n     *  1 - January\n     *  2 - February\n     *  3 - March\n     *  etc.\n     */\n    static generate(params = {}) {\n      let y;\n      let m;\n      let d;\n      const gender = params.gender || (Math.round(Math.random()) === 0 ? \"male\" /* MALE */ : \"female\" /* FEMALE */);\n      let personalId = \"\";\n      const hospitals = [\n        \"00\",\n        // Kuressaare Haigla (j\u00E4rjekorranumbrid 001 kuni 020)\n        \"01\",\n        // Tartu \u00DClikooli Naistekliinik, Tartumaa, Tartu (011...019)\n        \"02\",\n        // Ida-Tallinna Keskhaigla, Hiiumaa, Keila, Rapla haigla (021...220)\n        \"22\",\n        // Ida-Viru Keskhaigla (Kohtla-J\u00E4rve, endine J\u00F5hvi) (221...270)\n        \"27\",\n        // Maarjam\u00F5isa Kliinikum (Tartu), J\u00F5geva Haigla (271...370)\n        \"37\",\n        // Narva Haigla (371...420)\n        \"42\",\n        // P\u00E4rnu Haigla (421...470)\n        \"47\",\n        // Pelgulinna S\u00FCnnitusmaja (Tallinn), Haapsalu haigla (471...490)\n        \"49\",\n        // J\u00E4rvamaa Haigla (Paide) (491...520)\n        \"52\",\n        // Rakvere, Tapa haigla (521...570)\n        \"57\",\n        // Valga Haigla (571...600)\n        \"60\",\n        // Viljandi Haigla (601...650)\n        \"65\",\n        // L\u00F5una-Eesti Haigla (V\u00F5ru), P\u00E4lva Haigla (651...710?)\n        \"70\",\n        // All other hospitals\n        \"95\"\n        // Foreigners who are born in Estonia\n      ];\n      if (![\"male\" /* MALE */, \"female\" /* FEMALE */].includes(gender)) {\n        return \"\";\n      }\n      if (params.birthYear) {\n        y = params.birthYear;\n      } else {\n        y = Math.round(\n          Math.random() * 100 + 1900 + ((/* @__PURE__ */ new Date()).getFullYear() - 2e3)\n        );\n      }\n      if (params.birthMonth) {\n        m = params.birthMonth;\n      } else {\n        m = Math.floor(Math.random() * 12) + 1;\n      }\n      if (params.birthDay) {\n        d = params.birthDay;\n      } else {\n        const daysInMonth = new Date(y, m, 0).getDate();\n        d = Math.floor(Math.random() * daysInMonth) + 1;\n      }\n      for (let i = 1800, j = 2; i <= 2100; i += 100, j += 2) {\n        if (y >= i && y < i + 100) {\n          switch (gender) {\n            case \"male\" /* MALE */:\n              personalId += String(j - 1);\n              break;\n            case \"female\" /* FEMALE */:\n              personalId += String(j);\n              break;\n            default:\n              return \"\";\n          }\n        }\n      }\n      personalId += String(y).substring(2, 4);\n      personalId += String(m).padStart(2, \"0\");\n      personalId += String(d).padStart(2, \"0\");\n      personalId += hospitals[Math.floor(Math.random() * hospitals.length)];\n      personalId += String(Math.floor(Math.random() * 10));\n      personalId += String(this.prototype.getControlNumber(personalId));\n      return personalId;\n    }\n  }\n  var Gender = /* @__PURE__ */ ((Gender2) => {\n    Gender2[\"MALE\"] = \"male\";\n    Gender2[\"FEMALE\"] = \"female\";\n    Gender2[\"UNKNOWN\"] = \"unknown\";\n    return Gender2;\n  })(Gender || {});\n  return __toCommonJS(isikukood_exports);\n})();\nwindow.Isikukood=Isikukood.default;\n"],
  "mappings": "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",
  "names": ["__defProp", "__getOwnPropDesc", "__getOwnPropNames", "__hasOwnProp", "__export", "target", "all", "name", "__copyProps", "to", "from", "except", "desc", "key", "__toCommonJS", "mod", "isikukood_exports", "Gender", "Isikukood", "c", "code", "mul1", "mul2", "controlNum", "total", "i", "year", "month", "day", "birthDate", "genderNum", "maleDigits", "femaleDigits", "today", "age", "monthDiff", "firstNumber", "j", "ik", "params", "y", "m", "d", "gender", "personalId", "hospitals", "daysInMonth", "Gender2"]
}
